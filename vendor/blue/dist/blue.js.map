{"version":3,"sources":["blue.js","_nav.es6","_nav_logo.es6","_nav_state.js","_nav_visibility.es6","_scroll.es6","_scroll_state.es6"],"names":["_classCallCheck","instance","Constructor","TypeError","$","window","subvisual","nav","update","currentScrollTop","lastScrollTop","scrollState","ScrollState","navVisibility","$element","navLogo","updateWithScroll","logo","visibility","updateAfterAnimation","showMonoLogo","find","addClass","showColoredLogo","removeClass","hasClass","hasPassedTheElement","outerHeight","closeOverlay","open","body","css","burger","navOverlay","openOverlay","bindFocusEvents","navOverlayFirstItem","on","e","which","shiftKey","menu","focus","preventDefault","addEventListener","animationName","unaffixNav","isAtTheTop","hideNav","affixNav","hasntScrolledEnough","hasScrolledDown","checkScroll","didScroll","undefined","setInterval","document","scrollTop","onscroll","setTimeout","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","this","delta","value","elementHeight","Math","abs"],"mappings":"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","file":"blue.js","sourcesContent":[null,"$(function() {\n  window.subvisual = window.subvisual || {};\n  window.subvisual.nav = (function() {\n    let $element = $('.Nav');\n    let navLogo = window.subvisual.nav.logo;\n    let navVisibility = window.subvisual.nav.visibility;\n\n    function update(currentScrollTop, lastScrollTop) {\n      let scrollState = new ScrollState(currentScrollTop, lastScrollTop);\n\n      navVisibility.update(scrollState, $element);\n      navLogo.updateWithScroll(scrollState, $element);\n    }\n\n    navLogo.update($element);\n    navVisibility.updateAfterAnimation($element);\n\n    return { update };\n  })();\n});\n","$(function(){\n  window.subvisual = window.subvisual || {};\n  window.subvisual.nav = window.subvisual.nav || {};\n  window.subvisual.nav.logo = (function() {\n    function showMonoLogo($element) {\n      $element.find('.NavLogo').addClass('NavLogo--mono');\n    }\n\n    function showColoredLogo($element) {\n      $element.find('.NavLogo').removeClass('NavLogo--mono');\n    }\n\n    function update($element) {\n      if ($element.hasClass('Nav--light') || $element.hasClass('Nav--transparent')) {\n        if ($element.hasClass('Nav--fixed')) {\n          showColoredLogo($element);\n        } else {\n          showMonoLogo($element);\n        }\n      } else {\n        showColoredLogo($element);\n      }\n    }\n\n    function updateWithScroll(scrollState, $element) {\n      if (scrollState.hasPassedTheElement($element.outerHeight())) {\n        showColoredLogo($element);\n      } else {\n        update($element);\n      }\n    }\n\n    return { update, updateWithScroll };\n  })();\n});\n","$(function() {\n  var body = $('body');\n  var nav = $('.Nav');\n  var navOverlay = $('.NavOverlay');\n  var menu = $('.Nav-menu');\n  var burger = nav.find('.Burger');\n  var navOverlayFirstItem = $('.NavOverlay .NavOverlay-item:first .NavOverlay-link');\n\n  closeOverlay();\n  bindFocusEvents();\n\n  var open = false;\n\n  nav.on('click', '.Nav-menu', function() {\n    if (!open) {\n      openOverlay();\n    } else {\n      closeOverlay();\n    }\n  });\n\n  // remove from accesibility tree when hidden.\n  navOverlay.on('transitionend', function() {\n    if (!open)\n      navOverlay.css('display', 'none');\n  });\n\n  function closeOverlay() {\n    open = false;\n    body.css('overflow', 'auto');\n\n    burger.removeClass('is-open');\n    nav.removeClass('is-open');\n    navOverlay.removeClass('is-open');\n  }\n\n  function openOverlay() {\n    open = true;\n    body.css('overflow', 'hidden');\n\n    burger.addClass('is-open');\n    nav.addClass('is-open');\n    navOverlay.css('display', 'block');\n    navOverlay.addClass('is-open');\n  }\n\n  function bindFocusEvents() {\n    navOverlayFirstItem.on('keydown', function(e) {\n      if (e.which == 9 && e.shiftKey) { // 9 is the keyCode for TAB\n        menu.focus();\n        e.preventDefault();\n      }\n    });\n\n    menu.on('keydown', function(e) {\n      if (open && e.which == 9 && !e.shiftKey) { // 9 is the keyCode for TAB\n        navOverlayFirstItem.focus();\n        e.preventDefault();\n      }\n    });\n\n    $('body').on('keydown', function(e) {\n      if (open && e.which == 27) // 27 is the keyCode for ESC\n        closeOverlay();\n    });\n  }\n});\n","$(function(){\n  window.subvisual = window.subvisual || {};\n  window.subvisual.nav = window.subvisual.nav || {};\n  window.subvisual.nav.visibility = (function() {\n    function updateAfterAnimation($element) {\n      if (!$element[0]) {\n        return;\n      }\n\n      $element[0].addEventListener(\"animationend\", function(e) {\n        if (e.animationName == 'slideup') {\n          $element.addClass('Nav--hint');\n          $element.removeClass('Nav--fixed');\n          $element.removeClass('Nav--animateUp');\n          $element.find('.Burger').removeClass('Burger--fixed');\n        }\n      }, false);\n    }\n\n    function unaffixNav(isAtTheTop, $element) {\n      if (isAtTheTop) {\n        $element.removeClass('Nav--fixed');\n        $element.removeClass('Nav--hint');\n        $element.find('.Burger').removeClass('Burger--fixed');\n      }\n    }\n\n    function hideNav(hasPassedTheElement, $element) {\n      if ($element.hasClass('Nav--fixed')) {\n        $element.addClass('Nav--animateUp');\n      } else if (hasPassedTheElement) {\n        $element.addClass('Nav--hint');\n      }\n    }\n\n    function affixNav(hasPassedTheElement, $element) {\n      if ((!hasPassedTheElement && $element.hasClass('Nav--fixed')) || hasPassedTheElement) {\n        $element.addClass('Nav--fixed');\n        $element.removeClass('Nav--hint');\n        $element.find('.Burger').addClass('Burger--fixed');\n      } else if (!hasPassedTheElement) {\n        $element.removeClass('Nav--hint');\n      }\n    }\n\n    function update(scrollState, $element) {\n      unaffixNav(scrollState.isAtTheTop(), $element);\n\n      if (scrollState.hasntScrolledEnough())\n        return;\n\n      let hasPassedTheElement = scrollState.hasPassedTheElement($element.outerHeight());\n\n      if (scrollState.hasScrolledDown()) {\n        hideNav(hasPassedTheElement, $element);\n      } else {\n        affixNav(hasPassedTheElement, $element);\n      }\n    }\n\n    return { update, updateAfterAnimation };\n  })();\n});\n","$(function() {\n  let didScroll;\n  let lastScrollTop = 0;\n  let currentScrollTop;\n\n  function checkScroll() {\n    didScroll = true;\n  }\n\n  setInterval(function() {\n    if (didScroll) {\n      currentScrollTop = $(document).scrollTop();\n      window.subvisual.nav.update(currentScrollTop, lastScrollTop);\n      lastScrollTop = currentScrollTop;\n\n      didScroll = false;\n    }\n  }, 250);\n\n  window.onscroll = checkScroll;\n  setTimeout(checkScroll, 50);\n});\n","class ScrollState {\n  constructor(currentScrollTop, lastScrollTop) {\n    this.currentScrollTop = currentScrollTop;\n    this.lastScrollTop = lastScrollTop;\n    this.delta = 50;\n  }\n\n  hasScrolledDown() {\n    return this.currentScrollTop > this.lastScrollTop;\n  }\n\n  hasPassedTheElement(elementHeight) {\n    return this.currentScrollTop > elementHeight;\n  }\n\n  isAtTheTop() {\n    return this.currentScrollTop == 0;\n  }\n\n  hasntScrolledEnough() {\n    return Math.abs(this.lastScrollTop - this.currentScrollTop) <= this.delta;\n  }\n}\n"],"sourceRoot":"/source/"}